(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[3],{11:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return O}));var c=n(13),r=n.n(c),a=n(21),u=n(15),s=n.n(u),i=n(3);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var o=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},l=function(){s.a.defaults.headers.common.Authorization=""},j=Object(i.c)("auth/register",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:return a=e.sent,u=a.data,o(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(i.c)("auth/login",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:return a=e.sent,u=a.data,o(u.token),e.abrupt("return",u);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",c(e.t0.data));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),d=Object(i.c)("auth/logout",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,s.a.post("/users/logout");case 4:l(),e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.data));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),O=Object(i.c)("auth/refresh",function(){var e=Object(a.a)(r.a.mark((function e(t,n){var c,a,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return o(a),e.prev=5,e.next=8,s.a.get("/users/current");case 8:return u=e.sent,i=u.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",n.rejectWithValue(e.t0.data));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},18:function(e,t,n){e.exports={link:"navigations_link__1pvqB",activeLink:"navigations_activeLink__55gpF navigations_link__1pvqB"}},19:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return j})),n.d(t,"h",(function(){return b})),n.d(t,"d",(function(){return d}));var c=n(3),r=Object(c.b)("contacts/addRequests"),a=Object(c.b)("contacts/addSuccess"),u=Object(c.b)("contacts/addError"),s=Object(c.b)("contacts/deleteRequests"),i=Object(c.b)("contacts/deleteSuccess"),o=Object(c.b)("contacts/deleteError"),l=Object(c.b)("contacts/getRequests"),j=Object(c.b)("contacts/getSuccess"),b=Object(c.b)("contacts/getError"),d=Object(c.b)("contacts/FILTER")},22:function(e,t,n){e.exports={user_menu:"userMenu_user_menu__1_FfY",user_menu_btn:"userMenu_user_menu_btn__3zk9s",user_menu_title:"userMenu_user_menu_title__2vki7",user_menu_title_name:"userMenu_user_menu_title_name__lsUq8"}},26:function(e,t,n){e.exports={header:"appBar_header__180C3",loader:"appBar_loader__2x8pV"}},94:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(25),u=n.n(a),s=n(2),i=n(5),o=n(39),l=n.n(o),j=n(12),b=n(18),d=n.n(b),O={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsFetching:function(e){return e.auth.isFetching}},h=n(1),f=function(){var e=Object(i.c)(O.getIsLoggedIn);return Object(h.jsxs)("nav",{children:[Object(h.jsx)(j.b,{className:d.a.link,to:"/",children:"Home"}),e&&Object(h.jsx)(j.b,{className:d.a.link,to:"/contacts",children:"Contacts"})]})},p=n(26),g=n.n(p);function x(){return Object(h.jsxs)("nav",{children:[Object(h.jsx)(j.b,{className:d.a.link,to:"/register",children:"Registration"}),Object(h.jsx)(j.b,{className:d.a.link,to:"/login",children:"Log In"})]})}var m=n(11),v=n(22),_=n.n(v);function k(){var e=Object(i.b)(),t=Object(i.c)(O.getUserName);return Object(h.jsxs)("div",{className:_.a.user_menu,children:[Object(h.jsxs)("p",{className:_.a.user_menu_title,children:["Welcome,",Object(h.jsx)("span",{className:_.a.user_menu_title_name,children:t})]}),Object(h.jsx)("button",{className:_.a.user_menu_btn,type:"button",onClick:function(){return e(Object(m.c)())},children:"Exit"})]})}function y(){var e=Object(i.c)(O.getIsLoggedIn);return Object(h.jsxs)("header",{className:g.a.header,children:[Object(h.jsx)(f,{}),e?Object(h.jsx)(k,{}):Object(h.jsx)(x,{})]})}var I=function(e){var t=e.restricted,n=void 0!==t&&t,c=e.redirectTo,r=void 0===c?"/":c;return Object(i.c)(O.getIsLoggedIn)&&n?Object(h.jsx)(s.a,{to:r}):Object(h.jsx)(s.b,{})};function L(e){var t=e.redirectTo,n=void 0===t?"/":t;return Object(i.c)(O.getIsLoggedIn)?Object(h.jsx)(s.b,{}):Object(h.jsx)(s.a,{to:n})}var w=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,102))})),F=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,103))})),N=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,104))})),z=Object(c.lazy)((function(){return Promise.all([n.e(7),n.e(0)]).then(n.bind(null,105))}));function T(){var e=Object(i.b)(),t=Object(i.c)(O.getIsFetching);return Object(c.useEffect)((function(){e(Object(m.a)())}),[e]),t?null:Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{}),Object(h.jsx)(c.Suspense,{fallback:Object(h.jsx)(l.a,{type:"ThreeDots",color:"#00BFFF",height:80,width:80,timeout:3e3,display:"flex","justify-content":"center",className:g.a.loader}),children:Object(h.jsxs)(s.e,{children:[Object(h.jsx)(s.c,{path:"/",element:Object(h.jsx)(I,{}),children:Object(h.jsx)(s.c,{path:"/",element:Object(h.jsx)(w,{})})}),Object(h.jsx)(s.c,{path:"/register",element:Object(h.jsx)(I,{restricted:!0,redirectTo:"/contacts"}),children:Object(h.jsx)(s.c,{path:"/register",element:Object(h.jsx)(F,{})})}),Object(h.jsx)(s.c,{path:"/login",element:Object(h.jsx)(I,{redirectTo:"/contacts",restricted:!0}),children:Object(h.jsx)(s.c,{path:"/login",element:Object(h.jsx)(N,{})})}),Object(h.jsx)(s.c,{element:Object(h.jsx)(L,{path:"/contacts",redirectTo:"/"}),children:Object(h.jsx)(s.c,{path:"/contacts",element:Object(h.jsx)(z,{})})})]})})]})}var B,E,R=n(27),S=n(3),q=n(14),V=n(40),W=n.n(V),M=n(41),C=n.n(M),U=n(10),A=n(6),J=n(19),D=Object(S.d)([],(B={},Object(U.a)(B,J.j,(function(e,t){return t.payload})),Object(U.a)(B,J.g,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n}))})),Object(U.a)(B,J.c,(function(e,t){var n=t.payload;return[].concat(Object(R.a)(e),[n])})),B)),H=Object(S.d)("",Object(U.a)({},J.d,(function(e,t){return t.payload}))),P=Object(A.b)({items:D,filter:H}),Y=Object(S.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetching:!1},extraReducers:(E={},Object(U.a)(E,m.d.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(U.a)(E,m.b.fulfilled,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0})),Object(U.a)(E,m.c.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(U.a)(E,m.a.pending,(function(e){e.isFetching=!0})),Object(U.a)(E,m.a.fulfilled,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isFetching=!1})),Object(U.a)(E,m.a.rejected,(function(e){e.isFetching=!1})),E)}).reducer,G=[].concat(Object(R.a)(Object(S.f)({serializableCheck:{ignoredActions:[q.a,q.f,q.b,q.c,q.d,q.e]}})),[C.a]),K={key:"auth",storage:W.a,whitelist:["token"]},Q=Object(S.a)({reducer:{auth:Object(q.g)(K,Y),contacts:P},middleware:G,devTools:!1}),X=Object(q.h)(Q),Z=n(42);n(93);u.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(i.a,{store:Q,children:Object(h.jsx)(Z.a,{loading:null,persistor:X,children:Object(h.jsx)(j.a,{children:Object(h.jsx)(T,{})})})})}),document.getElementById("root"))}},[[94,5,6]]]);
//# sourceMappingURL=main.5ac2da1c.chunk.js.map